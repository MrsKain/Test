@{
    ViewBag.Title = "添加题目";
    Layout = "~/Views/Shared/_LayoutSellersB.cshtml";
}
@using System.Data;
 <form id="example" >
    <div class="page-content">

        <div class="page-breadcrumbs">
            <ul class="breadcrumb">
                <li>
                    <i class="fa fa-home"></i>
                    <a href="###">修改题目</a>
                </li>
                <li>
                    <a href="/PC/UpdateExamInfor/@ViewBag.id">修改题目</a>
                </li>

            </ul>
        </div>

        <div class="page-header position-relative">
            <div class="header-title">
            </div>

            <div class="header-buttons">
                <a class="sidebar-toggler" href="#">
                    <i class="fa fa-arrows-h"></i>
                </a>
                <a class="refresh" id="refresh-toggler" href="#">
                    <i class="glyphicon glyphicon-refresh"></i>
                </a>
                <a class="fullscreen" id="fullscreen-toggler" href="#">
                    <i class="glyphicon glyphicon-fullscreen"></i>
                </a>
            </div>

        </div>
        <div class="page-body">
            <div class="row">
                <div class="col-lg-12 col-sm-12 col-xs-12">

                    <div class="row">
                        <div class="col-lg-6 col-sm-6 col-xs-12" style="width: 100%">
                            <div class="widget flat radius-bordered">
                                <div class="widget-header bg-blue">
                                    <span class="widget-caption">修改题目</span>
                                </div>
                                <div class="widget-body">
                                    
                                    @{
                                        DataTable dt = ViewBag.table as DataTable;
                                        foreach(DataRow dr in dt.Rows)
                                        {
                                        <div id="registration-form">
                                      
                                            <div class="form-title">
                                              添加题目(判断题正确答案，A为正确，B为错误，材料解析题不需要填写答案。)
                                          </div>
                                         <div class="form-group">
                                                            <span class="input-icon icon-right">
                                                                 <textarea name="concents" style="width: 100%; height: 100px;"   placeholder="题目" id="Question" class="input1">@dr["Question"].ToString()</textarea>
                                                            </span>
                                                        </div>
                                       <div class="form-group">
                                                            <span class="input-icon icon-right">
                                                               
                                                                 <input type="text" class="form-control" id="A" value="@dr["A"].ToString()"  placeholder="答案A">
                                                            </span>
                                                        </div>                                                                                                               
                                     <div class="form-group">
                                                            <span class="input-icon icon-right">                                                              
                                                                  <input type="text" class="form-control" id="B" value="@dr["B"].ToString()"   placeholder="答案B">
                                                            </span>
                                                        </div>
                                         <div class="form-group">
                                                            <span class="input-icon icon-right">                                                              
                                                                  <input type="text" class="form-control" id="C" value="@dr["C"].ToString()"   placeholder="答案C">
                                                            </span>
                                                        </div>
                                           <div class="form-group">
                                                            <span class="input-icon icon-right">                                                              
                                                                  <input type="text" class="form-control" id="D"  value="@dr["D"].ToString()"  placeholder="答案D">
                                                            </span>
                                                        </div>
                                           <div class="form-group">
                                                            <span class="input-icon icon-right">                                                              
                                                                  <select class="form-control" name="country" id="type2"  data-bv-field="country">     
                                                                    <option value='0'>请选择正确答案</option> 
                                                                   <option value='A'>A</option>
                                                                   <option value='B'>B</option>
                                                                   <option value='C'>C</option> 
                                                                   <option value='D'>D</option>                                                   
                                                                </select>
                                                            </span>
                                                        </div>
                                          <div class="form-group">
                                                            <span class="input-icon icon-right">                                                              
                                                                  <input type="text" class="form-control" id="trades" value="@dr["trades"].ToString()"  onkeyup="if(isNaN(value))execCommand('undo')" onafterpaste="if(isNaN(value))execCommand('undo')" placeholder="本题分数">
                                                            </span>
                                                        </div>
                                           <div class="form-group">
                                                            <span class="input-icon icon-right">     
                                                                  <textarea name="concents" style="width: 100%; height: 100px;"   placeholder="答案解析" id="Analysis" class="input1">@dr["Analysis"].ToString() </textarea>                                                         
                                                                
                                                            </span>
                                                        </div>
                                           

                                            <button type="button" onclick="Save()"  class="btn btn-blue">修改</button>
                                     
                                    </div>
                                        }
                                        }
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript">
    function titletype() {
        debugger;
        var value = '@ViewBag.types';
        if (value == "1") {
            $("#A").removeAttr("disabled");
            $("#B").removeAttr("disabled");
            $("#C").removeAttr("disabled");
            $("#D").removeAttr("disabled");
            $("#type2").removeAttr("disabled");
            $("#type2").empty();
            var oSheng = $("#type2");
            $("<option value='0'>请选择正确答案</option>").appendTo(oSheng);
            $("<option value='A'>A</option>").appendTo(oSheng);
            $("<option value='B'>B</option>").appendTo(oSheng);
            $("<option value='C'>C</option>").appendTo(oSheng);
            $("<option value='D'>D</option>").appendTo(oSheng);
        }
        if (value == "2") {
            $("#A").attr("disabled", "disabled");
            $("#B").attr("disabled", "disabled");
            $("#C").attr("disabled", "disabled");
            $("#D").attr("disabled", "disabled");
            $("#type2").removeAttr("disabled");
            $("#type2").empty();
            var oSheng = $("#type2");
            $("<option value='0'>请选择正确答案</option>").appendTo(oSheng);
            $("<option value='A'>A</option>").appendTo(oSheng);
            $("<option value='B'>B</option>").appendTo(oSheng);

        }
        if (value == "3") {
            $("#A").attr("disabled", "disabled");
            $("#B").attr("disabled", "disabled");
            $("#C").attr("disabled", "disabled");
            $("#D").attr("disabled", "disabled");
            $("#type2").attr("disabled", "disabled");

        }
    }
    function Save() {
        if ($("#Question").val() == null) {
            alert("题目不可以为空");
            return;
        }
        $.ajax({
            type: "post",
            url: "/PCserver/updateQuestionSaveAjax",
            data: {
                id:'@ViewBag.id',
                Question: $("#Question").val(),
                A: $("#A").val(),
                B: $("#B").val(),
                C: $("#C").val(),
                D: $("#D").val(),
                Answer: $("#type2").find("option:selected").val(),
                trades: $("#trades").val(),
                Analysis: $("#Analysis").val()
            },
            success: function (IsSuccess) {
                if (IsSuccess == "0") {
                    location.href = "/PC/ExamInforManager";
                }
                else {
                    alert("修改失败");

                }


            }

        });
    }
    $(document).ready(function () {
        titletype();
    });
</script>

